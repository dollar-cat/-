(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13a6859a"],{"1dde":function(t,e,r){var s=r("d039"),a=r("b622"),o=r("2d00"),i=a("species");t.exports=function(t){return o>=51||!s((function(){var e=[],r=e.constructor={};return r[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"3c22":function(t,e,r){},"4ebe":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{width:"100%"},attrs:{name:"el-fade-in-linear"}},[r("el-drawer",{attrs:{title:"管理列表",direction:t.rtl,visible:t.drawerShow,size:"75%",open:"openGroupDrawer"},on:{"update:visible":function(e){t.drawerShow=e}}},[r("el-row",{staticStyle:{width:"100%",margin:"0px 0px 2% 5%"}},[r("el-button",{attrs:{type:"primary",disabled:"",round:""}},[t._v("修改")]),r("el-button",{attrs:{type:"success",disabled:"",round:""}},[t._v("停止")]),r("el-button",{attrs:{type:"danger",round:""},on:{click:t.delectGroup}},[t._v("删除组")])],1),r("el-table",{ref:"selectActiveUser",staticStyle:{width:"100%",margin:"0px 0px 5% 5%"},attrs:{data:t.userData,height:"300","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{label:"创建日期",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("i",{staticClass:"el-icon-time"}),r("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.createDate))])]}}])}),r("el-table-column",{attrs:{prop:"remark",label:"备注",width:"200"}}),r("el-table-column",{attrs:{label:"姓名",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-popover",{attrs:{trigger:"hover",placement:"top"}},[r("p",[t._v("卡类型: "+t._s(e.row.cardType))]),r("p",[t._v("手机号: "+t._s(e.row.phone))]),r("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.identityName))])],1)])]}}])}),r("el-table-column",{attrs:{prop:"setNumber",label:"在组个数",width:"170"}}),r("el-table-column",{attrs:{label:"操作"}},[[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"只添加勾选的",placement:"top"}},[r("el-button",{attrs:{size:"mini"},on:{click:t.addGroupUser}},[t._v("添加")])],1)]],2)],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-left":"5%"},attrs:{data:t.groupInsideUserData,height:"350","tooltip-effect":"dark"}},[r("el-table-column",{attrs:{label:"创建日期",width:"305"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("i",{staticClass:"el-icon-time"}),r("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.createDate))])]}}])}),r("el-table-column",{attrs:{prop:"remark",label:"备注",width:"200"}}),r("el-table-column",{attrs:{label:"姓名",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-popover",{attrs:{trigger:"hover",placement:"top"}},[r("p",[t._v("cookie:"+t._s(e.row.cookie))]),r("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.userName))])],1)])]}}])}),r("el-table-column",{attrs:{prop:"usage",label:"请求次数",width:"170"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在本组内停止或开启",placement:"top"}},[r("el-button",{attrs:{size:"mini",disabled:!e.row.isActive},on:{click:function(r){return t.stopUser(e.row.groupId,e.row.snowflakeId)}}},[t._v(" "+t._s(e.row.isSnatch?"停止":"开启"))])],1),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在本组内删除",placement:"top"}},[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return t.delectUser(e.row.groupId,e.row.snowflakeId)}}},[t._v("删除 ")])],1)]}}])})],1)],1),r("el-row",[r("el-col",{attrs:{spam:24}},[r("img",{attrs:{src:""}}),r("div",{staticStyle:{float:"right",margin:"10px 20px 20px 0"}},[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",circle:""},on:{click:function(e){t.showAdd?t.showAdd=!1:t.showAdd=!0}}})],1)]),t._l(t.groupData,(function(e,s){return r("el-col",{key:s,attrs:{span:7,offset:s>0?1:0,name:"el-fade-in"}},[r("el-card",{attrs:{id:"content","body-style":{padding:"0px"},shadow:"hover"}},[r("img",{staticClass:"image",attrs:{src:"https://img1.baidu.com/it/u=3421193089,2140635042&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500"}}),r("div",{staticStyle:{padding:"14px"}},[r("div",{staticStyle:{"font-weight":"350",margin:"5px 0px 20px 0px"}},[r("span",[t._v(t._s(e.remark))])]),r("div",{staticClass:"group_row",staticStyle:{"font-size":"14px","font-weight":"300"}},[r("span",[t._v("当前状态：")]),e.isActive?t._e():r("span",{staticClass:"status disabled",staticStyle:{float:"right"}},[t._v(t._s(e.isActive?"开启":"停止"))]),e.isActive?r("span",{staticClass:"status active",staticStyle:{float:"right"}},[t._v(t._s(e.isActive?"开启":"停止"))]):t._e()]),r("div",{staticClass:"group_row",staticStyle:{"font-size":"14px","font-weight":"300"}},[r("span",[t._v("组内人数：")]),r("span",{staticStyle:{float:"right"}},[t._v(t._s(e.userSize)+" ")])]),r("div",{staticClass:"group_row",staticStyle:{"font-size":"14px","font-weight":"300"}},[r("span",[t._v("成功下单数：")]),r("span",{staticStyle:{float:"right"}},[t._v(t._s(e.orderNumber)+"/"+t._s(e.activeUserSize)+" ")])]),r("div",{staticClass:"group_row",staticStyle:{"font-size":"14px","font-weight":"300"}},[r("span",[t._v("任务医生：")]),r("span",{staticStyle:{float:"right"}},[t._v(t._s(e.docter))])]),r("div",{staticClass:"group_row",staticStyle:{"font-size":"14px","font-weight":"300"}},[r("span",[t._v("任务类型：")]),r("span",{staticStyle:{float:"right"}},[t._v(t._s(1==e.taskType?"单人轮询":"未知"))])]),r("div",{staticClass:"group_row",staticStyle:{"font-size":"14px","font-weight":"300"}},[r("span",[t._v("挂号日期：")]),r("span",{staticStyle:{float:"right"}},[t._v(t._s(e.registerDate))])]),r("div",{staticClass:"group_row",staticStyle:{"font-size":"14px","font-weight":"300"}},[r("span",[t._v("开始时间：")]),r("span",{staticStyle:{float:"right"}},[t._v(t._s(e.taskStartDate))])]),r("div",{staticClass:"group_row",staticStyle:{"font-size":"14px","font-weight":"300"}},[r("span",[t._v("创建时间：")]),r("span",{staticStyle:{float:"right"}},[t._v(t._s(e.createDate)+" ")])]),r("div",{staticClass:"bottom clearfix"},[r("time",{staticClass:"time"}),r("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(r){return t.openDrawer(e.id)}}},[t._v("进入管理")])],1)])])],1)}))],2),r("el-dialog",{attrs:{visible:t.showAdd,width:"700px","append-to-body":""},on:{"update:visible":function(e){t.showAdd=e},close:t.addDialogClose}},[r("el-form",{ref:"form",staticStyle:{"margin-right":"50px"},attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"组备注",prop:"remark"}},[r("el-input",{attrs:{maxlength:"15",placeholder:"请输入备注",clearable:""},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),r("el-form-item",{attrs:{label:"挂号科",prop:"subjectId"}},[r("el-select",{attrs:{placeholder:"请选择科",clearable:!0},on:{change:function(e){return t.subjectChange(t.form.subjectId)}},model:{value:t.form.subjectId,callback:function(e){t.$set(t.form,"subjectId",e)},expression:"form.subjectId"}},t._l(t.subject,(function(t){return r("el-option",{key:t.deptCode,attrs:{label:t.deptName,value:t.deptCode}})})),1)],1),r("el-form-item",{attrs:{label:"挂号详细科",prop:"subjects"}},[r("el-select",{staticStyle:{"margin-right":"20px"},attrs:{disabled:""==t.form.subjectId,placeholder:"请选择详细科",clearable:!0},on:{change:function(e){return t.subjectsChange(t.form.subjectsId)}},model:{value:t.form.subjectsId,callback:function(e){t.$set(t.form,"subjectsId",e)},expression:"form.subjectsId"}},t._l(t.subjects,(function(t){return r("el-option",{key:t.deptCode,attrs:{label:t.deptName,value:t.deptCode}})})),1)],1),r("el-form-item",{attrs:{label:"挂号医生",prop:"docterId"}},[r("el-select",{attrs:{disabled:""==t.form.subjectsId,placeholder:"请选择医生",clearable:!0},model:{value:t.form.docterId,callback:function(e){t.$set(t.form,"docterId",e)},expression:"form.docterId"}},t._l(t.docter,(function(t){return r("el-option",{key:t.docCode,attrs:{label:t.docName+"("+t.docDuty+")",value:t.docCode}})})),1)],1),r("el-form-item",{attrs:{label:"挂号日期",prop:"registerDate"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.form.registerDate,callback:function(e){t.$set(t.form,"registerDate",e)},expression:"form.registerDate"}})],1),r("el-col",{staticClass:"line",attrs:{span:2}}),r("el-col",{attrs:{span:11}},[r("el-select",{attrs:{placeholder:"默认没有随机选择",clearable:!0},model:{value:t.form.registerTime,callback:function(e){t.$set(t.form,"registerTime",e)},expression:"form.registerTime"}},t._l(t.registerTime,(function(t){return r("el-option",{key:t.v,attrs:{label:t.k,value:t.v}})})),1)],1)],1),r("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[r("el-time-picker",{attrs:{"value-format":"timestamp",placeholder:"选择时间"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1)],1),r("div",[r("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",size:"medium",plain:""},on:{click:t.submitForm}},[t._v("创 建 ")]),r("el-button",{attrs:{type:"info",size:"medium",plain:""},on:{click:t.reset}},[t._v("重 置")])],1)],1)],1)},a=[],o=(r("a434"),{data:function(){return{form:{remark:"",subjectId:"",subjectsId:"",docterId:"",registerDate:"",registerTime:"",startTime:""},addGroupUserForm:{selectActiveUser:null,selectGroupId:null},drawerShow:!1,showAdd:!1,subject:null,subjects:null,docter:null,groupData:null,userData:null,drawerGroupId:null,groupInsideUserData:null,registerTime:[{k:"上午",v:0},{k:"下午",v:1},{k:"前夜",v:2}],rules:{remark:[{required:!0,message:"请输入组名称",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],subjectId:[{required:!0,message:"请选择科",trigger:"change"}],subjectsId:[{required:!0,message:"请选择详细科",trigger:"change"}],docterId:[{required:!0,message:"请选择医生",trigger:"change"}],registerDate:[{type:"date",required:!0,message:"请选择挂号日期",trigger:"change"}],registerTime:[{type:"date",required:!0,message:"请选择挂号时间",trigger:"change"}],startTime:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}]}}},created:function(){var t=this;this.getSubject(),this.getGroupList(),setInterval((function(){t.getGroupList()}),1e4),this.getUserList()},methods:{delectUser:function(t,e){var r=this;this.$http.get("group/delect/"+t+"/"+e).then((function(e){if(200!=e.data.code)return r.error(e.data),null;r.getGroupList(),r.success(e.data),r.getGroupUserList(t)}))},stopUser:function(t,e){var r=this;this.$http.get("group/stop/user/"+t+"/"+e).then((function(e){if(200!=e.data.code)return r.error(e.data),null;r.getGroupList(),r.success({msg:"操作成功!"}),r.getGroupUserList(t)}))},delectGroup:function(){var t=this,e=this.$loading({lock:!0,text:"拼命处理中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$http.get("group/delect/"+this.drawerGroupId).then((function(r){if(200!=r.data.code)return t.error(r.data),null;t.drawerShow=!1,t.getGroupList(),t.success({msg:"删除成功!"}),e.close()}))},openDrawer:function(t){this.drawerShow=!0,this.drawerGroupId=t,this.addGroupUserForm.selectGroupId=t,this.getGroupUserList(t)},getGroupUserList:function(t){var e=this;this.$http.get("/group/inside/user/"+t).then((function(t){if(200!=t.data.code)return e.error({msg:"获取组内用户数据失败！"}),null;e.groupInsideUserData=t.data.data}))},addGroupUser:function(){var t=this;this.$http.post("/group/addUser",this.addGroupUserForm).then((function(e){if(200!=e.data.code)return t.error(e.data.data),null;t.success({msg:"添加成功！"}),t.subjects=e.data.data,t.getGroupUserList(t.addGroupUserForm.selectGroupId)}))},handleSelectionChange:function(t){var e=new Array;for(var r in t)e[r]={id:t[r].id};this.addGroupUserForm.selectActiveUser=e},openGroupDrawer:function(){this.addGroupUserForm.selectActiveUser=[]},addDialogClose:function(){this.form.subject="",this.form.subjects="",this.form.docter=""},subjectChange:function(t){var e=this;this.$http.get("/docter/subjects/"+t).then((function(t){if(t.data.data.length<1)return e.error({msg:"获取详细科数据失败！"}),null;e.subjects=t.data.data}))},subjectsChange:function(t){var e=this;this.$http.get("/docter/docter/"+t).then((function(t){if(t.data.data.length<1)return e.error({msg:"获取医生数据失败！"}),null;e.docter=t.data.data}))},getSubject:function(){var t=this;this.$http.get("/docter/subject").then((function(e){if(e.data.data.length<1)return t.error({msg:"获取医生数据失败！"}),null;t.subject=e.data.data}))},deleteRow:function(t,e){this.remove(t,e)},stop:function(t,e){var r=this;this.$http.get("/user/stop/"+e[t].cardId).then((function(t){200==t.data.code?(r.success(t.data),r.getList()):r.error(t.data)}))},remove:function(t,e){var r=this;this.$http.get("/user/remove/"+e[t].cardId).then((function(s){200==s.data.code?(r.success(e[t].cardId),e.splice(t,1)):r.error(s.data)}))},success:function(t){this.$notify({title:"成功通知",message:t.msg,type:"success",duration:2e3,showClose:!0})},error:function(t){null!=t.data?this.$notify({title:t.msg,message:t.data,type:"error",duration:4e3,showClose:!0}):this.$notify({title:"失败通知",message:t.msg,type:"error",duration:4e3,showClose:!0})},getGroupList:function(){var t=this;this.$http.get("/group/list").then((function(e){if(200==e.data.code){if(t.groupData=e.data.data,e.data.data.length<1)return null}else t.error(e.data)}))},getUserList:function(){var t=this;this.$http.get("/user/list").then((function(e){if(200==e.data.code){if(t.userData=e.data.data,e.data.data.length<1)return null}else t.error(e.data)}))},handleAdd:function(){this.reset(),this.showAdd=!0},handleStop:function(t){var e=this;this.$http.get("/del",{url:t.url}).then((function(t){200==t.data.code&&(e.$message.success(t.data.msg),e.getList())}))},submitForm:function(){var t=this,e=this.$loading({lock:!0,text:"拼命处理中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$http.post("/group/create",this.form).then((function(r){e.close(),200==r.data.code?(t.success({msg:"创建组成功！"}),t.showAdd=!1,t.getGroupList()):t.error(r.data)}))},reset:function(){this.form.subject="",this.form.subjects="",this.form.docter="",this.form.registerDate="",this.form.registerDate="",this.form.startTime="",this.form.subject=""}}}),i=o,n=(r("7537"),r("2877")),l=Object(n["a"])(i,s,a,!1,null,null,null);e["default"]=l.exports},"65f0":function(t,e,r){var s=r("861d"),a=r("e8b5"),o=r("b622"),i=o("species");t.exports=function(t,e){var r;return a(t)&&(r=t.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?s(r)&&(r=r[i],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},7537:function(t,e,r){"use strict";r("3c22")},8418:function(t,e,r){"use strict";var s=r("c04e"),a=r("9bf2"),o=r("5c6c");t.exports=function(t,e,r){var i=s(e);i in t?a.f(t,i,o(0,r)):t[i]=r}},a434:function(t,e,r){"use strict";var s=r("23e7"),a=r("23cb"),o=r("a691"),i=r("50c4"),n=r("7b0b"),l=r("65f0"),c=r("8418"),d=r("1dde"),u=d("splice"),p=Math.max,f=Math.min,m=9007199254740991,h="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var r,s,d,u,g,b,v=n(this),w=i(v.length),y=a(t,w),_=arguments.length;if(0===_?r=s=0:1===_?(r=0,s=w-y):(r=_-2,s=f(p(o(e),0),w-y)),w+r-s>m)throw TypeError(h);for(d=l(v,s),u=0;u<s;u++)g=y+u,g in v&&c(d,u,v[g]);if(d.length=s,r<s){for(u=y;u<w-s;u++)g=u+s,b=u+r,g in v?v[b]=v[g]:delete v[b];for(u=w;u>w-s+r;u--)delete v[u-1]}else if(r>s)for(u=w-s;u>y;u--)g=u+s-1,b=u+r-1,g in v?v[b]=v[g]:delete v[b];for(u=0;u<r;u++)v[u+y]=arguments[u+2];return v.length=w-s+r,d}})},e8b5:function(t,e,r){var s=r("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}}}]);
//# sourceMappingURL=chunk-13a6859a.5d63f7a2.js.map